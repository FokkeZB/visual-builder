<!DOCTYPE html>
<html>
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-27002928-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-27002928-5');
  </script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Advanced Features |  Zapier Visual Builder Documentation</title>
  <meta name="description" content="Zapier Visual Builder">
  <link rel="icon" href="/visual-builder/assets/images/favicon.ico">
  <link rel="stylesheet" href="/visual-builder/assets/stylesheets/base.css">
</head>

  <body class="split-layout">
    


<div class="sidebar">
  <div class="sidebar__header">
    <a href="/visual-builder/" class="sidebar__logo">
      <div class="sidebar__icon"></div> Zapier Visual Builder
    </a>
    <button class="menu-toggle js-menu-toggle" aria-controls="menu" aria-expanded="false">
      <div class="menu-toggle__icon" alt="Menu icon">
    </button>
  </div>
  <nav id="menu" class="sidebar__nav">
    

<a class="sidebar__toggle " href="/visual-builder/quickstart/introduction">
  <h3 class="sidebar__title">Quick Start</h3>
  <div class="sidebar__arrow js-sidebar-toggle" aria-controls="quickstart-list" aria-expanded="false"></div>
</a>

<ul id=quickstart-list class="sidebar__list" aria-hidden="true">
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/quickstart/introduction" class="sidebar__list-link ">Intro</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/quickstart/what-you-need" class="sidebar__list-link ">What You Need</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/quickstart/create-integration" class="sidebar__list-link ">Create a New Integration</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/quickstart/project-structure" class="sidebar__list-link ">Project Structure</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/quickstart/auth" class="sidebar__list-link ">Handle Authentication</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/quickstart/build-trigger" class="sidebar__list-link ">Add a Trigger</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/quickstart/build-action" class="sidebar__list-link ">Add an Action</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/quickstart/test-complete" class="sidebar__list-link ">Test Your Integration</a>
    </li>
  
</ul>

    

<a class="sidebar__toggle  sidebar__toggle--is-selected " href="/visual-builder/docs/intro">
  <h3 class="sidebar__title">Beta Documentation</h3>
  <div class="sidebar__arrow js-sidebar-toggle" aria-controls="docs-list" aria-expanded="true"></div>
</a>

<ul id=docs-list class="sidebar__list" aria-hidden="false">
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/intro" class="sidebar__list-link ">Intro</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/start" class="sidebar__list-link ">Getting Started</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/auth" class="sidebar__list-link ">Authentication</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/basic" class="sidebar__list-link ">— Basic Auth</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/session" class="sidebar__list-link ">— Session Auth</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/apikey" class="sidebar__list-link ">— API Key Auth</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/oauth" class="sidebar__list-link ">— OAuth v2</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/digest" class="sidebar__list-link ">— Digest Auth</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/input-designer" class="sidebar__list-link ">Input Designer</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/triggers" class="sidebar__list-link ">Triggers</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/actions" class="sidebar__list-link ">Actions</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/search-create" class="sidebar__list-link ">Searches and Creates</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/testing" class="sidebar__list-link ">Testing</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/advanced" class="sidebar__list-link  sidebar__list-link--is-selected ">Advanced Features</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/versions" class="sidebar__list-link ">Versions</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/faq" class="sidebar__list-link ">FAQs</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/glossary" class="sidebar__list-link ">Glossary</a>
    </li>
  
    <li class="sidebar__list-item">
      <a href="/visual-builder/docs/vs" class="sidebar__list-link ">Visual Builder vs CLI</a>
    </li>
  
</ul>

  </nav>
</div>

    <aside class="toc">
      <h3>Contents</h3>
      <ul>
  <li><a href="#environment-variables">Environment Variables</a></li>
  <li><a href="#computed-fields">Computed Fields</a></li>
  <li><a href="#zapier-data-bundles">Zapier Data Bundles</a></li>
</ul>

    </aside>
    <main class="container">
      <section class="content"><p><a id="environment"></a></p>
<h2 id="environment-variables">Environment Variables</h2>

<p>Some APIs require additional data to authenticate or connect to your app. You may need a custom API key to pass to the API, along with users’ authentication credentials. Or you might want to set a sub-domain, role, user permissions, or other API configurations differently for your beta integration and live, active versions of your integration.</p>

<p>Zapier’s environment variables let you set these on a per-version basis for your app. Much like in local development environments such as the one in <a href="https://zapier.github.io/zapier-platform-cli/#environment">Zapier’s CLI developer platform</a>, environment variables store key and value pairs outside of your app’s API calls. Instead of hardcoding critical, secret values into your API authentication, trigger, and action calls, it’s best to add them as environment variables in your app’s <em>Advanced</em> settings, then reference the environment variable in your API calls.</p>

<blockquote>
  <p><strong>Tip</strong>: Zapier’s built-in OAuth v2 Authentication automatically includes client ID and client secret fields, for two of the most commonly used environment variables. Only use the custom environment variables for other variables.</p>
</blockquote>

<h3 id="how-to-add-environment-variables">How to Add Environment Variables</h3>

<p><img src="https://cdn.zapier.com/storage/photos/031d216898813b0d07c5d3936f075e51.png" alt="Zapier Environment Variables" />
<em>Add any environment variables you need in key and value pairs</em></p>

<p>To add environment variables, open your integration in Zapier visual editor and select the <em>Advanced</em> tab in the left sidebar. There you can add your environment variables including a key and a value for each. Click <em>Add</em> to include additional environment variables, or click the <code class="highlighter-rouge">x</code> icon to remove variables if needed.</p>

<h3 id="how-to-reference-environment-variables">How to Reference Environment Variables</h3>

<p><img src="https://cdn.zapier.com/storage/photos/0b8ad13d723229c67df03ad1c114dd91.png" alt="Use Zapier Environment Variable" />
<em>Use environment variables in Zapier’s API call forms or in custom code</em></p>

<p>The easiest way to use environment variables in any Zapier integration API call is through the <em>Request Body</em> form. Add your API URL, then click the <em>Show Options</em> link and select <em>Request Body</em> to see the data Zapier will send to your API. Add a new row, then enter your environment variable key as your API expects, then reference the environment variable in Zapier with the following text, replacing <code class="highlighter-rouge">YOUR_KEY</code> with your actual key:</p>

<p><code class="highlighter-rouge">{{process.env.YOUR_KEY}}</code></p>

<p>Zapier will then replace that variable with the value for that key from your <em>Advanced</em> settings—and will use the correct value every time if you change it in the future.</p>

<p>You can reference environment variables directly in your API calls the same way—though it’s best practice to include them in Zapier’s default request body instead. You can also reference them in custom code if you switch your API call to code mode.</p>

<h3 id="how-to-change-environment-variables">How to Change Environment Variables</h3>

<p><img src="https://cdn.zapier.com/storage/photos/b3273bf07dc46636595fd11edee1da1f.png" alt="Edit Zapier Environment Variables" />
<em>You can change environment variable values, but not the original keys</em></p>

<p>Need to change your environment variables for a new version of your integration, or before releasing your beta integration to the public? Open the <em>Advanced</em> page in Zapier visual editor, and this time edit the text in the <em>Values</em> column with the new variable values. You cannot edit the keys.</p>

<p>If you need to change a key and its value, first delete the old key, then add a new one instead.</p>

<p><a id="computed"></a></p>
<h2 id="computed-fields">Computed Fields</h2>

<p><img src="https://cdn.zapier.com/storage/photos/b82edea722597f88f5c0d21a46d6c847.png" alt="Zapier Computed Fields" /></p>

<p>When adding an input field in your integration’s authentication, Zapier includes a <em>Field Type</em> option with two field options: <em>Field</em> and <em>Computed Field</em>. The former is a standard input field much like those in the trigger and action <a href="https://zapier.github.io/visual-builder/docs/input-designer">input designer</a>, where users enter info needed for authentication.</p>

<blockquote>
  <p><strong>Note:</strong> Only use computed fields with session and OAuth v2 authentication.</p>
</blockquote>

<p>Computed Fields, on the other hand, store values obtained from an integration’s API test call, so they can be referenced in your integration’s subsequent API calls.</p>

<p>Say your app includes a subdomain that can be fetched with an API call using the API key—and your other API calls require the subdomain be used in requests. You would add a computed field that references that value from your server’s response, much like the way you reference fields in connected accounts.</p>

<p>Zapier stores all fields returned by authentication API test call and auth process. Computed fields, however, are marked as <em>required</em> internally, so if the auth process does not return the field referenced in your computed field, Zapier will show an error. For example, if using OAuth v.2 authentication, the <code class="highlighter-rouge">getAccessToken</code> request must return any computed fields included in your app’s authentication input form.</p>

<p>If your app API calls in triggers or actions require account details or other info that users shouldn’t have to enter manually, include a computed field in your app’s authentication input fields. For the <em>Key</em>, use the exact same field name as the one your API returns. Zapier then will match the API test call’s output to the field you included, so you can reference it from the input bundle with the following text, replacing <code class="highlighter-rouge">field</code> with your field key:</p>

<p><code class="highlighter-rouge">{{bundle.authData.field}}</code></p>

<p><a id="bundle"></a></p>
<h2 id="zapier-data-bundles">Zapier Data Bundles</h2>

<p>Zapier stores data from users’ authentication and input forms for API calls in the <code class="highlighter-rouge">bundle</code> object. You can reference that data in your integration using <code class="highlighter-rouge">{{bundle.bundleName.field}}</code> text in API requests and connection labels, replacing <code class="highlighter-rouge">bundleName</code> with the bundle name and <code class="highlighter-rouge">field</code> with the input field key or API response field key you need. You can also reference bundles in custom code if you switch to code mode, using the same name but without the curly brackets, for example <code class="highlighter-rouge">return bundle.bundleName.field;</code> to have JavaScript code return a specific field.</p>

<p>If an API response includes a nested field, you can reference it as <code class="highlighter-rouge">field.nestedfield</code>, for example <code class="highlighter-rouge">{{bundle.inputData.data.name}}</code> to reference a <code class="highlighter-rouge">name</code> nested field inside the <code class="highlighter-rouge">data</code> field.</p>

<p>Zapier integrations include the following bundles:</p>

<h3 id="authdata">authData</h3>

<p>Referenced with: <code class="highlighter-rouge">{{bundle.authData.field}}</code></p>

<p>Includes data users enter into the authentication input form, including the <code class="highlighter-rouge">username</code> field for <a href="https://zapier.github.io/visual-builder/docs/basic">Basic Auth</a> and any other field added to the authentication input form with other authentication methods. Additionally, with OAuth v2, Session Auth, and Digest Auth, <code class="highlighter-rouge">authData</code> includes all data returned by the Token Exchange Endpoint url, referenced with the following, replacing <code class="highlighter-rouge">field</code> with the field name from your API response:</p>

<p><code class="highlighter-rouge">{{bundle.authData.field}}</code></p>

<p>For example, the Access Token value will often accessed via <code class="highlighter-rouge">{{bundle.authData.access_token}}</code> or <code class="highlighter-rouge">{{bundle.authData.accessToken}}</code></p>

<p>Commonly used authData fields include:</p>

<ul>
  <li>Username: <code class="highlighter-rouge">{{bundle.authData.username}}</code></li>
  <li>Password: <code class="highlighter-rouge">{{bundle.authData.password}}</code></li>
  <li>Access Token: <code class="highlighter-rouge">{{bundle.authData.access_token}}</code> or <code class="highlighter-rouge">{{bundle.authData.accessToken}}</code></li>
</ul>

<h3 id="inputdata">inputData</h3>

<p>Referenced with: <code class="highlighter-rouge">{{bundle.inputData.field}}</code></p>

<p>In authentication fields and connection labels, <code class="highlighter-rouge">inputData</code> contains the output fields returned from the test API call, typically used to add a label to new integration connections.</p>

<p>In Trigger and Action steps, <code class="highlighter-rouge">inputData</code> contains the data from input forms that users enter themselves which Zapier passes to the app with that Trigger or Action’s API call, with <code class="highlighter-rouge">{{curlies}}</code> mapped fields from previous Zap steps rendered with their raw data.</p>

<p>If you want the input field data with the original <code class="highlighter-rouge">{{curlies}}</code> and not the text from previous steps, use <code class="highlighter-rouge">{{bundle.inputDataRaw.field}}</code> instead.</p>

<p>Commonly used inputData fields include:</p>

<ul>
  <li>Zapier Redirect URI: <code class="highlighter-rouge">{{bundle.inputData.redirect_uri}}</code></li>
  <li>Authentication Code: <code class="highlighter-rouge">{{bundle.inputData.code}}</code></li>
</ul>

<h3 id="rawrequest-and-cleanedrequest">rawRequest and cleanedRequest</h3>

<blockquote>
  <p>Note: Only used with the <code class="highlighter-rouge">getAccessToken</code> data from OAuth v2 authentication</p>
</blockquote>

<p>Referenced with: <code class="highlighter-rouge">{{bundle.rawRequest}}</code> or <code class="highlighter-rouge">{{bundle.cleanedRequest.field}}</code></p>

<p>Includes the raw or cleaned info, respectively, from the user’s browser request that triggers the <code class="highlighter-rouge">getAccessToken</code> call from OAuth v2 authentication. Can reference individual fields with <code class="highlighter-rouge">cleanedRequest</code>.</p>

<h3 id="targeturl">targetURL</h3>

<p>Referenced with: <code class="highlighter-rouge">{{bundle.targetURL}}</code></p>

<p>In triggers using REST hooks, this returns the URL a site should send data to, such as <code class="highlighter-rouge">https://hooks.zapier.com/1234/abcd</code>.</p>

<h3 id="subscribedata">subscribeData</h3>

<p>Referenced with: <code class="highlighter-rouge">{{bundle.subscribeData}}</code></p>

<p>In triggers using REST hooks, this includes the data from the <code class="highlighter-rouge">performSubscribe</code> function which is used if you need to send a <code class="highlighter-rouge">DELETE</code> request to your server to stop sending webhook data to Zapier</p>

<h3 id="processenv">process.env</h3>

<p>Referenced with: <code class="highlighter-rouge">{{process.env.field}}</code></p>

<p>Commonly used process.env fields include:</p>

<ul>
  <li>Client Secret: <code class="highlighter-rouge">{{process.env.CLIENT_SECRET}}</code></li>
  <li>Client ID: <code class="highlighter-rouge">{{process.env.CLIENT_ID}}</code></li>
</ul>
</section>
      <footer class="prev-next">



<hr>
<a class="button blue" href="/visual-builder/docs/testing">Previous: Testing</a>
<a class="button blue" href="/visual-builder/docs/versions">Next: Versions</a></footer>
    </main>
    <script>
(function() {

const toggleMenu = (isOpen, id) => {
  const toggle = document.querySelector(`[aria-controls="${id}"]`);
  const list = document.querySelector(`#${id}`);
  if (toggle) {
    toggle.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
  }
  if (list) {
    list.setAttribute('aria-hidden', isOpen ? 'false' : 'true');
  }
  if (isOpen) {
    localStorage.setItem(id, 'open');
  } else {
    localStorage.removeItem(id);
  }
};

const selectSidebarToggles = () => document.querySelectorAll('.js-sidebar-toggle');

selectSidebarToggles().forEach(function(toggle) {
  var listId = toggle.getAttribute('aria-controls');
  var list = document.getElementById(listId);
  toggle.addEventListener('click', function(event){
    const isListHidden = list.getAttribute('aria-hidden') === 'true';
    event.preventDefault();
    event.stopPropagation();
    selectSidebarToggles().forEach((tgl) => {
      toggleMenu(false, tgl.getAttribute('aria-controls'));
      toggleMenu(isListHidden, listId);
    });
  });
});

/* Sidebar menu */
var menuToggle = document.querySelector('.js-menu-toggle');
var menu = document.getElementById('menu');
var MEDIUM_SCREEN = 770;

// On initial page load, hide menu on iPad and smaller
if (window.innerWidth < MEDIUM_SCREEN) {
  menu.setAttribute('aria-hidden', 'true');
  menuToggle.setAttribute('aria-expanded', 'false');
} else {
  menu.setAttribute('aria-hidden', 'false');
}

// On window resize, show the menu if it's hidden on large screens
window.addEventListener('resize', function() {
  if (window.innerWidth >= MEDIUM_SCREEN) {
    menu.setAttribute('aria-hidden', 'false');
    menuToggle.setAttribute('aria-expanded', 'true');
  } else {
    menu.setAttribute('aria-hidden', 'true');
    menuToggle.setAttribute('aria-expanded', 'false');
  }
})

menuToggle.addEventListener('click', function(event) {
  if (menuToggle.getAttribute('aria-expanded') === 'true') {
    // Close menu
    menu.setAttribute('aria-hidden', 'true');
    menuToggle.setAttribute('aria-expanded', 'false');
  } else {
    // Open menu
    menu.setAttribute('aria-hidden', 'false');
    menuToggle.setAttribute('aria-expanded', 'true');
  }
})

})()
</script>

<script type="text/javascript">
  (function (w, d, t, u, n, s, e) {
  w['SwiftypeObject'] = n; w[n] = w[n] || function () {
    (w[n].q = w[n].q || []).push(arguments);
  }; s = d.createElement(t);
    e = d.getElementsByTagName(t)[0]; s.async = 1; s.src = u; e.parentNode.insertBefore(s, e);
  })(window, document, 'script', '//s.swiftypecdn.com/install/v2/st.js', '_st');

  _st('install', 'ZEr4Hw56b1TGkz2qViWp', '2.0.0');
</script>

  </body>
</html>
